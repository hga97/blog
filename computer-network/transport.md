传输层功能、传输层寻址  
不可靠传输信道的表现，可靠数据传输原理  
停-等协议（ARQ）与滑动窗口协议（GBN、SR）  
用户数据报协议（UDP）  
TCP 特点及 TCP 连接管理（三次握手连接、四次挥手断开链接）  
TCP 可靠数据传输  
TCP 拥塞控制（慢启动、拥塞避免、快速重传、快速恢复）

### 传输层的基本服务

#### 传输层功能

1、传输层的核心任务：**应用进程之间提供端到端的逻辑通信服务**。

比如：你和你的朋友邮件通信、聊微信、聊 QQ。

2、传输层的功能

1）对应用层报文进行分段和重组 （了解）  
2）面向应用层实现复用与分解（第 2 节）  
3）实现端到端的流量控制（第 5 节）  
4）拥塞控制（第 5 节）  
5）传输层寻址（后续内容）  
6）对报文进行差错检测 （第 3 节提到，第五章详解）  
7）实现进程间的端到端可靠数据传输控制（第 3 节）

3、并不是所有的传输层协议都要实现所有的功能，大部分传输层协议只实现其中一部分的功能。

例如：internet 的传输层（TCP、UDP）

4、从传输层的角度看，通信的真正端点不是主机，而是在主机中运行的应用进程。端到端之间的通信是应用进程之间的通信。

例如：一个主机上，用户在使用浏览器浏览网页的同时、也在发邮件。 怎么确保各客户进程不出差错？复用与分解！（第二节）

#### 传输层寻址与端口

1、单个计算机中，不同应用进程用**进程标识符（进程 ID）**来区分

名称 PID  
Google Chrome 10710

不同计算机之间怎么区分应用进程？

传输层就是为了支持不同的主机，不同操作系统上的应用程序之间的通信，必须要使用**统一的寻址方式**对应用进程进行标识

TCP/IP 网络体系结构的解决方法：  
在传输层使用协议端口号，通常简称为端口  
在全网内利用**IP 地址+端口号**唯一标识一个通信端点

2、传输层端口号为 16 位整数，可以编写 65536 个（2 的 16 次方）

服务器端口号  
0-1023 熟知端口号  
1024-49151 登记端口号（IANA 登记、防止重复）

客服端口号  
49152-65535 短暂端口号

3、常用端口号

20、21 FTP 文件传输协议端口号  
25 SMTP 简单邮件传输协议端口号  
53 DNS 域名服务器端口号  
80 HTTP 超文本传输协议端口号  
110 POP3 第三版的邮局协议端口号

#### 无连接服务与面向连接服务

无连接服务： 数据传输之前：无需与对端进行任何信息交换（“握手”），直接构造传输层报文段并向接收端发送。（邮政系统的信件通信）

面向连接服务：数据传输之前：需要双方交换一些**控制信息**，建立逻辑连接，然后再传输数据，传输结束后还需要拆除连接。（电话通信）

### 传输层的复用与分解

#### 复用与分解的基本概念

1、多路复用与多路分解：支持众多应用进程共用同一传输层协议，能准确的将接收的数据交付给不同的应用进程，称为传输层的多路复用与多路分解。

2、多路复用：在源主机，传输层协议从不同的套接字收集应用进程发送的数据块，并为每个数据块封装上首部信息（包括用于分解的信息）构成报文段，然后将报文段传递给网络层。

同一主机，多个进程同时利用同一个传输层协议。

3、多路分解：在目的主机，传输层协议读取报文段中的字段，标识出接收套接字，进而通过该套接字，将传输层的报文段中的数据交付给正确的套接字。

对接收到报文段（封装了不同应用进程的数据）分解，交付给正确的进程

实现复用与分解的关键：传输层协议能够唯一识别一个套接字。

#### 无连接的多路复用与多路分解

Internet 传输层提供无连接服务的传输层协议是用户数据报协议

1、为 UDP 套接字分配端口号的两种方法：

1）创建一个 UDP 套接字时，传输层自动为该套接字分配一个端口号（1024-65535 之间），该端口号当前未被该主机中任何其他 UDP 套接字使用。

2）在创建一个 UDP 套接字后，通过调用 bind（）函数为该套接字绑定一个特定的端口号。

2、UDP 套接字二元组：<目的 IP 地址，目的端口号>

#### 面向连接的多路复用与多路分解

1、传输控制协议 ：Internet 提供面向连接服务的传输层协议。

TCP 套接字四元组：<源 IP 地址，源端口号，目的 IP 地址，目的端口号>
